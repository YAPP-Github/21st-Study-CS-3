# 20.9 하이퍼텍스트 캐싱 프로토콜

- `하이퍼텍스트 캐싱 프로토콜(HTCP)` 은 형제들이 URL과 `모든 요청 및 응답 헤더를 사용하여 서로에게 문서의 존재 여부에 대한 질의를 할 수 있도록 해줌`으로써 적중이 아님에도 적중으로 잘못 처리될 확률을 줄인다
- 더 나아가 HTCP는 형제 캐시들이 서로의 캐시 안에 있는 선택된 문서의 추가 및 삭제를 모니터링하고 요청할 수 있게 그리고 서로의 캐시된 문서에 대한 캐싱정책을 변경할 수 있게 해준다
- HTCP 메시지의 구조는 다음과 같다.
  - 헤더 부분은 메시지의 길이와 메시지의 버전을 포함한다. 데이터 부분은 OP코드를 포함한 데이터의 길이로 시작하여 응답 코드, 몇몇 태그들과 아이디들이 이어지며 실제 데이터로 끝난다. 선택적인 인증 구획은 데이터 구획 다음에 온다. 메시지 필드의 상세는 다음과 같다.
    - 헤더
      - 헤더 영역은 32비트 메시지 길이, 8비트 주 프로토콜 버전, 8비트 부 프로토콜 버전으로 이루어져 있다. 메시지 길이는 모든 헤더, 데이터, 인증 크기를 포함한다.
    - 데이터
      - 데이터 영역은 HTCP 메시지를 포함한다.

### `HTCP 인증(20.9.1) 과 캐싱 정책 설정(20.9.2) 는 책을 참고하시는 게 좋아보여 첨부하지 않았습니다`

- 요청과 응답 헤더를 질의 메시지에 담아 형제 캐시로 보내는 것이 허용됨에 따라 HTCP 는 캐시 질의에서 거짓 적중의 비율을 줄일 수 있다
- 더 나아가 HTCP는 형제 캐시들이 정책 정보를 서로 교환할 수 있게 함으로써 그들이 더욱 서로를 잘 도울 수 있도록 해줄 수 있다
