## 18.3 안정적인 웹 사이트 만들기
- 서버 다운, 트래픽 폭증, 네트워크 장애

## 18.3.1 미러링 된 서버 팜

- 서버 팜은 서로 대신할 수 있고 식별할 수 있게 설정된 웹 서버들의 집합
- 서버팜의 서버에 잇는 콘텐츠들은 한 곳에 문제가 생기면 다른 한 곳에서 대신 전달할 수 있게 미러링 가능
- `마스터 원 서버` : 원본 콘텐츠가 있는 서버
- `복제 원 서버` : 마스터 원서버로부터 미러링 된 서버 
- 미러링 된 웹 서버에는 다른 위치에 있는 콘텐츠와 정확히 같은 복제본이 있다. 
- 마스터 서버는 클라이언트에게 콘텐츠를 제공하면서 복제 서버들에게 콘텐츠를 퍼트리는 일을 한다.

### 클라이언트의 요청이 특정 서버로 가는 두 가지 방법
- `HTTP 리다이렉션` - 콘텐츠에 대한 URL이 마스터 서버의 IP를 가리키고, 마스터 서버는 요청을 받는 즉시 복제 서버로 리다이렉트 시킨다
- `DNS 리다이렉션` - 콘텐츠의 URL은 네 개의 IP주소를 가리킬 수 있고, DNS 서버는 클라이언트에게 전송할 IP주소를 선택할 수 있다.

## 18.3.2 콘텐츠 분산 네트워크

- 콘텐츠 분산 네트워크(CDN)는 특정 콘텐츠의 분산을 목적으로 하는 단순한 네트워크이다. 
- 네트워크의 노드는 서버, 대리서버, 혹은 프락시 서버

## 18.3.3 CDN의 대리 캐시
- 대리 캐시는 복제 원 서버를 대신해 사용될 수 있다.
- 대리서버는 리버스 프락시라고도 불리며, 미러링된 웹 서버처럼 콘텐츠에 대한 요청을 받는다. -> 특정 원서버를 대신

### 대리 서버와 미러링 서버의 차이점
- 대리 서버는 보통 수요에 따라서 동작한다.
- 대리 서버는 미러링 서버와는 다르게 원 서버의 전체 콘텐츠를 복사하지 않는다.
- 대리 서버는 요청이 들어오는 콘텐츠에 대해서만 저장
- 원 서버는 대리 서버에 대해서는 콘텐츠를 업데이트 해줄 의무는 없다.
- CDN이 대리 서버보다 캐시를 계층화하기 더 어렵다.

## 18.3.4 CDN의 프락시 캐시

- 근본적으로 프락시 캐시는 어떤 웹 서버 요청이든지 다 받을 수 있다.
- 대리 서버의 프락시 캐시의 콘텐츠는 요청이 있을 때만 저장될 것이고 원본 서버 콘텐츠를 정확히 복제한다는 보장이 없다.
   - 레이어2 혹은 레이어3 장비(스위치)가 중간에서 웹 트래픽을 가로채 처리하기도 한다
   - 가로채기 설정은 클라이언트와 서버 사이의 모든 HTTP 요청이 물리적으로 캐시를 거치게 네트워크 설정을 할 수 있는지에 따라 달라진다.

## 18.4 웹 사이트 빠르게 만들기
- 서버 팜, 대리 서버, 프락시 캐시 를 사용하는 게 콘텐츠 전송 속도 단축
- `콘텐츠 인코딩` : 클라이언트 인코딩 된 콘텐츠를 디코딩 하는 과정 또한 콘텐츠 전송 속도 단축

## Q. 다음 중 올바르지 않은 것은?
- 대리 서버에서는 원 서버의 웹 콘텐츠를 정확히 복제해낼 수 있다.
- 서버 팜에서 원 서버는 미러링 서버에게 콘텐츠를 보낼 의무가 있다.
- 프락시 캐시는 요청이 있을 때만 콘텐츠를 저장하는 경우도 있다.