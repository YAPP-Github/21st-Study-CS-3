# 17.3 서버 주도 협상
- 앞에서 봤던 클라이언트 주도 협상은 서버와 클라이언트 사이에서 커뮤니케이션 많이 필요하다는 단점
- **서버에서 어떤 페이지를 보여줄 것인지 결정**
  - 클라이언트가 자신이 선호하는 페이지에 대한 정보를 요청 헤더에 담아서 보내야함
  - `Accept` 관련 헤더, `User-Agent` 헤더

# 17.3.1 내용 협상 헤더
- `Accept` : 서버가 어떤 미디어 타입으로 보내도 되는지 알려준다.
- `Accept-Language`: 서버가 어떤 언어로 보내도 되는지 알려준다.
- `Accept-Charset` : 서버가 어떤 차셋으로 보내도 되는지 알려준다.
- `Accept-Encoding` : 서버가 어떤 인코딩으로 보내도 되는지 알려준다.

# 17.3.2 내용 협상 헤더의 품질값
- HTTP 프로토콜은 클라이언트가 각 선호의 카테고리마다 여러 선택 가능한 항목을 선호도와 함께 나열할 수 있도록 품질값을 정의하였다.
- q값은 0.0부터 1.0까지의 값을 가진다.(커질수록 높은 선호도)
`Accept-Language: en;q=0.5, fr;q=0.0, nl;q=1.0`

# 17.3.3 그 외의 헤더들에 의해 결정

- `User-Agent`와 같은 클라이언트의 다른 요청 헤더들을 이용해 알맞은 요청을 만들어내려고 시도할 수 있다.
- 캐시는 반드시 캐시된 문서의 올바른 최신버전을 제공해주려 하기 때문에 HTTP 프로토콜은 서버가 응답에 넣어 보낼 수 있는 `Vary` 헤더를 정의한다. 

# 17.3.4 아파치의 내용 협상

- 웹 사이트 디렉터리에서, 배리언트(variant)를 갖는 웹 사이트의 각 URI를 위한 type-map파일을 만든다. 
- 그 type-map파일은 모든 배리언트와 그들 각각에 대응하는 내용 협상 헤더들을 나열한다.
- 아파치가 그 디렉터리에 대해 자동으로 type-map 파일을 생성하도록 하는 MultiViews 지시어를 켠다.

https://httpd.apache.org/docs/2.4/content-negotiation.html

Q. 클라이언트 주도 협상은 accept 요청 헤더에 q 값을 이용하여 클라이언트가 원하는 페이지를 서버로부터 받아올 수 있다.