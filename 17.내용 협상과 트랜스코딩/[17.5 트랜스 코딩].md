# 17.5 트랜스 코딩

## 1. 개요

- 지금까지 클라이언트와 서버가 협상을 통해 어떤 URL이 가리키는 문서들 중에서 클라이언트의 요구에 가장 잘 맞는 것 하나를 선택해 보내줄 수 있는 메커니즘에 대해 이야기했다. 이 메커니즘은 클라이언트의 요구에 맞는 문서가 존재해야 동작한다.
- 그러나 `서버가 클라이언트의 요구에 맞는 문서를 아예 갖고 있지 않다면 어떻게 되는가?`
  - 서버는 에러로 응답해야겠지만 이론적으로 `서버는 기존의 문서를 클라이언트가 사용할 수 있는 무언가로 변환할 수도 있다`
  - 이 옵션을 `트랜스코딩` 이라고 부른다
- 트랜스코딩에는 `포맷변환`, `정보 합성`, `내용 주입`의 세 종류가 있다

## 2. 포맷 변환(17.5.1)

- `포맷변환`: 데이터를 클라이언트가 볼 수 있도록 `한 포맷에서 다른 포맷으로 변환`하는 것이다
- 오래된 모바일 단말기가 데스크톱 클라이언트에서 보기 위해 만들어진 문서에 접근하려고 한다면 HTML을 WML로 변환해줄 필요가 있을 것이다
- 접속속도가 느리고 고해상도 이미지에 별로 관심이 없는 클라이언트에서 이미지가 많은 페이지를 쉽게 볼 수 있게 해주려면 이미지들을 칼라에서 흑백으로 변환하고 축소하여 크기와 해상도를 줄여주어야 할 것이다
- `포맷변환은 내용 협상 헤더에 의해 주도`된다

## 3. 정보 합성(17.5.2)

- `문서에서 정보의 요점을 추출`하는 것을 `정보 합성`이라고 하는데 이는 트랜스코딩 과정에서 유용할 수 있다
- 예를 들어 각 절의 제목에 기반한 문서의 개요 생성이나 체이지에서 광고 및 로고 제거를 들 수 있다
- 본문의 키워드에 기반하여 페이지를 분류하는 기술은 문서의 핵심을 요약할 때도 역시 유용하다
  - 이 기술은 포털 사이트의 웹페이지 디렉터리와 같은 자동화된 웹페이지 분류 시스템에 의해 종종 사용된다

## 4. 콘텐츠 주입(17.5.3)

- 지금까지 서술한 두 종류의 트랜스코딩은 일반적으로 웹 문서의 양을 줄이지만 `오히려 양을 늘리는 또 다른 종류의 변환인 내용 주입 트랜스코딩`이라는 것도 있다
- 내용 주입 트랜스코딩의 예로 자동 광고 생성과 사용자 추적 시스템이 잇다
- 지나가는 모든 HTML 페이지에 자동으로 광고를 삽입하는 광고 삽입 트랜스코더를 상상해보자
  - 현재 관련이 있거나 어떻게든 특정 사용자를 대상으로 하는 광고를 그때그때 효과적으로 삽입하기 위해 동적으로 이루어진다
- 사용자 추적 시스템 또한 어떻게 페이지가 보여지고 클라이언트가 웹을 돌아다니는지에 대한 통계를 수집하기 위해 페이지에 동적으로 콘텐츠를 추가할 수 있도록 만들어져 있다

## 5. 트랜스코딩 vs 정적으로 미리 생성해놓기

- 트랜스코딩의 대안은 웹 서버에서 웹페이지의 여러가지 사본을 만드는 것이다
  - 예를 들어 하나는 HTMl로, 또 하나는 WML로…
  - 그러나 이것은 여러가지 이유로 그다지 현실적인 기법이 될 수 없다
  - 페이지에 대한 어떠한 작은 변화도 여러 페이지의 수정을 요구하게 되고 각 페이지의 모든 버전을 저장하기 위해 더 많은 공간이 필요하게 되며 또한 페이지들을 관리하고 그것들 중 올바른 것을 골라서 제공해주는 웹 서버를 프로그래밍하기 어려워진다
- 광고 삽입과 같은 몇몇 트랜스코딩은 정적인 방법으로는 수행될 수 없다
  - 어떤 광고가 삽입될 것인지는 페이지를 요청한 사용자에게 달려있기 때문이다
- 루트 페이지를 그때그때 필요할 때마다 변환하는 것은 정적으로 미리 생성해놓는 것보다 더 쉬운 해결책이다
  - 그러나 이는 콘텐츠 제공에 있어 대기시간 증가로 인한 비용을 초래할 수 있다
  - 그러나 이들 계산 중 몇몇은 제삼자에게 수행하게 하여 웹 서버의 부담을 덜 수 있다
  - 변환은 더 싼 프락시나 캐시에 있는 외부 에이전트에 의해 수행될 수 있다
