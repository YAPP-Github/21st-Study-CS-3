# 16.2 문자집합과 HTTP

## 1. 차셋(Charset)은 글자를 비트로 변환하는 인코딩이다(16.2.1)

- `HTTP 차셋 값은` 어떻게 `엔터티 콘텐츠 비트들을 특정 문자 체계의 글자들로 바꾸는지` 말해준다
  - 각 차셋 태그는 비트들을 글자들로 변환하거나 혹은 그 반대의 일을 해주는 알고리즘을 명명한다
- 다음 `Content-Type 헤더`는 `수신자에게 콘텐츠가 HTML 파일임을 말해주고 charset 매개변수는 수신자에게 콘텐츠 비트들을 글자등로 디코딩하기 위해 iso-8859-6 아랍 문자집합 디코딩 기법을 사용`하라고 말해준다
  ```json
  Content-Type: text/html; charset=iso-8859-6
  ```
  - iso-8859-6 인코딩 구조는 8비트 값을 숫자와 구두점 그리고 다른 기호들을 포함한 라틴 문자와 아랍 문자로 매핑한다
- 몇몇 문자 인코딩은 글자 당 비트 수가 일정하지 않아 더 복잡한 가변길이 코드다
  - 이러한 종류의 코딩은 중국어나 일본어와 같이 많은 글자로 이루어진 문자체계를 지원하기 위해 추가적인 비트를 사용할 수 있게 해준다

## 2. 문자집합과 인코딩은 어떻게 동작하는가(16.2.2)

- 비트들을 문자로 변환하는 것은 두 단계에 걸쳐 일어난다

1. 문서를 이루는 비트들은 특정 코딩된 문자집합의 특정문자(각각 번호가 매겨져 있다)로 식별될 수 있는 문자 코드로 변환된다
2. 문자 코드는 코딩된 문자집합의 특정 요소를 선택하기 위해 사용된다

- 국제화된 문자 시스템의 핵심 목표는 표현(시각적인 표현방식)에서 의미(글자들)를 분리하는 것이다
  - HTTP 는 문자 데이터 및 그와 관련된 언어와 차셋 라벨의 전송에만 관심을 갖는다
  - 글자의 모양을 어떻게 표현할 것인가 하는 것은 사용자의 그래픽 디스플레이 소프트웨어(브라우저, 운영체제, 글꼴)가 결정한다

## 3. 잘못된 차셋은 잘못된 글자들을 낳는다(16.2.3)

- 만약 클라이언트가 잘못된 charset 매개변수를 사용한다면 클라이언트는 이상한 깨진 글자를 보여주게 될 것이다

## 4. 표준화된 MIME 차셋 값(16.2.4)

- 특정 문자 인코딩과 특정 코딩된 문자집합의 결합을 MIME 차셋이라고 부른다
- HTTP는 표준화된 MIME 차셋 태그를 `Content-Type`과 `Aceept-Charset헤더`에 사용한다
- MIME 차셋 인코딩 태그는 책 432쪽 표 16-1 참고

## 5. Content-Type charset 헤더와 META 태그(16.2.5)

- 웹 서버는 `클라이언트에게 MIME 차셋 태그를 charset 매개변수와 함께 Content-Type 헤더에 담아보낸다`
  - 만약 문자집합이 명시적으로 나열되지 않았다면 수신자는 콘텐츠로부터 문자집합을 추측하려 시도한다
  - HTML 콘텐츠에서 문자 집합은 문자 집합을 서술하는 <META HTTP-EQUIV=”Content-Type”> 태그에서 찾을 수 있다
- 아래는 어떻게 HTML META 태그가 문자집합을 일본어 인코딩 iso-2022-jp 로 설정하는지 보여준다. 만약 문서가 HTML 이 아니라면 혹은 META Content-Type 태그가 없다면 소프트웨어는 언어와 인코딩에 대한 일반적인 패턴을 찾기 위해 실제 텍스트를 스캐닝하여 문자 인코딩을 추측한다

```html
<head>
  <META HTTP-EQUIV=”Content-Type” CONTENT="text/html; charset=iso-2022-jp>
  <meta lang="jp" />
  <title>일본어 문서</title>
</head>
<body>
  ...
</body>
```

## 6. Aceept-Charset 헤더(16.2.6)

- HTTP 클라이언트는 서버에게 정확히 어떤 문자 체계를 그들이 지원하는지 `Accept-Charset 요청 헤더`를 통해 알려준다
- Accept-Charset 헤더의 값은 `클라이언트가 지원하는 문자 인코딩 목록`을 제공한다
- Accept-Charset 요청 헤더에 대응하는 `Content-Charset 응답 헤더는 존재하지 않는다는 것`에 주의
- 응답 문자집합은 MIME 과의 호환을 위해 Content-Type 응답 헤더의 charset 매개변수를 통해 서버로부터 돌려받는다
