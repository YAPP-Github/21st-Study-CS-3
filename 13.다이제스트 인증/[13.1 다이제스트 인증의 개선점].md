# 13.1 다이제스트 인증의 개선점
- 다이제스트 인증 : 기본인증과 호환되는 더 안전한 또 다른 형태의 HTTP 프로토콜(널리 쓰이지는 않음)
- 다이제스트 인증의 특징
   - 비밀번호를 절대로 네트워크를 통해 평문으로 전송 x
   - 인증 체결을 가로채서 재현하려는 악의적인 사람들을 차단
   - 구현하기에 따라서,메시지 내용위조를 막는 것도 가능
- 가장 안전한 프로토콜 x => 기본 인증보다는 강력함

## 13.1.1 비밀번호를 안전하게 지키기 위해 요약 사용하기
- "절대로 비밀번호를 네트워크를 통해 보내지 않는다".
  - 비밀번호를 비가역적으로 뒤섞은 **지문(fingerprint)**, 혹은 **요약(digest)** 을 보낸다.
- 다이제스트 인증 과정
   - ![image](https://user-images.githubusercontent.com/101736358/223114491-f63b03c8-b7cc-4e1d-a838-b6f3742df915.png)
  - 1. 클라이언트 가 서버 측에 보안문서에 대한 접근 요청
  - 2. 서버는 클라이언트에게 요약 형태의 인증 요구
  - 3. 클라이언트는 비밀번호의 요약 전달
  - 4. 서버는 클라이언트가 보낸 요약과 서버가 스스로 알고 있는 요약과 일치하는 지 비교
  - 5. 일치한다면 문서 접근 ok
## 13.1.2 단방향 요약
- 요약 : 정보에 대한 압축

- md5같은 요약함수를 통해 일반적으로 입력 가능한 무한 가지의 ㅁ모든 입력값들을 유한한 범위의 압축으로 변환
  - md5: 다이제스트 알고리즘 중의 하나로 인기 있는 요약 함수로 **원래 길이와 상관없이 128 비트 요약으로 변환**
-  비밀번호를 모른다면 서버에게 보내줄 알맞은 요약을 추측하기 위해 많은 시간을 소모하게 된다.

## 13.1.3 재전송 방지를 위한 난스 사용
- 비밀번호 자체를 보내진 않아도 요약 자체를 뺏어서 요약을 보내가지고, 서버에 재전송 가능(탈취 위험! 📢)
- 서버는 클라이언트에게 난스(nonce)라고 불리는 특별한, 그리고 자주 바뀌는 증표
- 비밀번호에 섞어서, 난스가 바뀔때마다 요약도 바뀌게 한다.
- 특정 난스 값에서만 요약값이 유효 해짐 -> 비밀번호를 알아야 올바른 요약값 계산 가능!
- 난스 값 `Authenticate` 에 담겨서 서버에서 클라이언트로 넘겨짐

## 13.1.4 다이제스트 인증 핸드세이크
- 기본 인증에서 사용하는 헤더와 비슷 (+ `Authenticate-Info` 헤더가 추가됨)
- 다이제스트 인증 핸드쉐이크
  - ![image](https://user-images.githubusercontent.com/101736358/223114768-1bad423a-0d85-4a76-9846-58f786bfee18.png)
  - 1. 서버가 난스 값 생성
  - 2. 서버 -> 클라이언트(`WWW-Authenticate` 헤더 에 알고리즘,난스를 보냄)
  - 3. 클라이언트는 알고리즘을 선택하고 그에 맞는 요약(클라이언트 난스,..)를 계산 (`Authoraization` 헤더에 담음)
  - 4. 서버는 클라이언트로부터 받은 요약과 자신이 계산한 요약값이 같은지 확인 , 다음 번 요약을 생성할 수 있도록 미리 난스를 계산해서 넘겨줄 수 있음(`Authenticate-INFO`)


