# 14.4 공개키 암호법

## 1. 개요

- 한쌍의 호스트가 하나의 인코딩/디코딩 키를 사용하는 대신, 공개키 암호 방식은 `두개의 비대칭 키`를 사용
  - 하나는 호스트의 메시지를 `인코딩`하기 위한 것
  - 하나는 호스트의 메시지를 `디코딩`하기 위한 것
- 인코딩 키는 `모두를 위해 공개`되어 있다(공개키 암호 방식이라는 이름이 붙은 이유)
  - 하지만 `호스트만이 개인 디코딩 키를 알고 있다`

![IMG_23B911707109-1.jpeg](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/5ae8670d-f3f2-4ba8-8f20-756c46d842c5/IMG_23B911707109-1.jpeg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20230320%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20230320T125040Z&X-Amz-Expires=86400&X-Amz-Signature=e00c721eb44284cc69b9d132953c565beab0c70d69cea87dba439bbae0eebfd8&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22IMG_23B911707109-1.jpeg%22&x-id=GetObject)

- 노드 X는 자신의 인코딩 키 e^x 를 공개적으로 배포할 수 있다. 이제 메시지를 노드 X에게 사보내고자 하는 누구나 똑같고 잘 알려진 공개키를 사용할 수 있다
- 각 호스트마다 누구나 사용할 수 있는 인코딩 키가 할당되어 있기 떄문에, 공개키 암호 방식은 대칭 키의 쌍이 N^2 로 폭발적으로 증가하는 것을 피할 수 있다
- 모든 사람이 X에게 보내는 메시지를 같은 키로 인코딩 할 수 있지만, X를 제외한 누구도 그 메시지를 디코딩할 수 없다.
  - 오직 X만이 디코딩 개인 키 d^x를 갖고 있기 때문
- 키의 분리는 메시지의 인코딩은 누구나 할 수 있도록 해주는 동시에, 메시지를 디코딩하는 능력은 소유자에게만 부여한다. 이는 노드가 서버로 안전하게 메시지를 발송하는 것을 더 쉽게 해주는데 왜냐하면 서버의 공개 키만 있으면 되기 때문이다.

- 공개키 암호화 기술은 보안 프로토콜을 전 세계의 모든 컴퓨터 사용자에게 적용하는 것을 가능하게 했다
- 표준화된 공개키 기술 묶음을 만드는 것의 중요성 때문에 거대한 공개 키 인프라(Public-Key Infrastructure, PKI) 표준화 작업이 25년 넘게 계속 진행 중인 상태

## 2. RSA(14.4.1)

- 공개키 비대칭 암호의 과제는 설혹 악당이 아래 내용을 알고 있다 해도 비밀인 개인 키를 계산할 수 없다는 것을 확신시켜 주는 것이다
  - `공개키`(물론 공개니까 누구나 얻을 수 있다)
  - `가로채서 얻은 암호문의 일부`(네트워크를 스누핑해서 획득)
  - `메시지와 그것을 암호화한 암호문`(인코더에 임의의 텍스트를 넣고 실행해서 획득)
- 이 모든 요구를 만족하는 공개키 암호 체계 중 유명한 하나는 MIT 에서 발명되고 이어서 RSA 데이터 시큐리티에서 상용화된 `RSA알고리즘`이다
  - 공개키, 평문의 일부, 공개키로 평문을 인코딩하여 얻은 평문에 대한 암호문, 그리고 RSA구현의 소스 코드까지 주어졌다 하더라도 암호를 크래킹하여 해당하는 개인 키를 찾아내는 것은 컴퓨터 과학의 모든 분야에서 가장 어려운 문제 중 하나라고 알ㄹ려진 큰 소수를 계산하는 문제만큼 어렵다고 한다
  - 따라서 만약 큰 숫자를 소수들로 분해하는 빠른 방법을 찾아낸다면 스위스 은행 계좌를 뚫는 것뿐 아니라 튜링상도 받을 수 있다
- RSA 암호 방식에 대해 자세히 알아보려면 꽤 까다로운 수학을 이해해야 하므로 우리는 여기서 그에 대해 깊이 들어가지 않을 것이다

## 3. 혼성 암호 체계와 세션 키(14.4.2)

- 비대칭 공개키 암호 방식은 `누구나 공개키만 알면 그 키에 대응되는 공개 서버에 안전하게 메시지를 보낼 수 있게 해주므로` 훌륭하다
- 두 노드가 안전하게 의사소통 하려고 할 때 개인 키에 대한 협상을 먼저 해야 할 필요가 없다
- 그러나 공개키 암호 방식의 알고리즘은 `계산이 느린 경향`이 있다
- 실제로는 `대칭`과 `비대칭` 방식을 섞은 것이 쓰인다
  - ex) 노드들 사이의 안전한 의사소통 채널을 수립할 때는 편리하게 공개 키 암호를 사용하고 이렇게 만들어진 안전한 채널을 통해 임시의 무작위 대칭 키를 생성하고 교환하여 이후의 나머지 데이터를 암호화할 때는 빠른 대칭 키를 사용하는 방식이 흔히 쓰인다
